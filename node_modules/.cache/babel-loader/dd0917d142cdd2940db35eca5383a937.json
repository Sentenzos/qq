{"ast":null,"code":"import React,{useEffect,useMemo,useRef}from\"react\";import{NavLink}from\"react-router-dom\";import cn from\"classnames\";import{shortenUserName}from\"./Users.js\";var User=React.memo(function(props){var large=props.photos.large,id=props.id,name=props.name,followed=props.followed,requestSubscribe=props.requestSubscribe,requestUnsubscribe=props.requestUnsubscribe,isSubscribing=props.isSubscribing,myId=props.myId;var userAvatar=useRef(null);useEffect(function(){if(!large)return;userAvatar.current.style.backgroundImage=\"url(\".concat(large,\")\");},[]);var userName=useMemo(function(){return shortenUserName(name);},[name]);var disableButton=isSubscribing.find(function(id){return id===props.id;})||id===myId||!myId;return React.createElement(\"div\",{className:\"users-list__user\"},React.createElement(NavLink,{to:\"/profile/\".concat(id)},React.createElement(\"div\",{className:\"users-list__user-avatar\",ref:userAvatar})),React.createElement(\"div\",{className:\"users-list__user-name\"},userName),React.createElement(\"label\",{className:cn(followed?\"users-list__unsubscribe-wrapper\":\"users-list__subscribe-wrapper\",disableButton&&\"is-subscribing\")},followed?\"Unsubscribe\":\"Subscribe\",React.createElement(\"button\",{className:\"users-list__unsubscribe\",disabled:disableButton,onClick:followed?function(){return requestUnsubscribe(props.id);}:function(){return requestSubscribe(props.id);}})));});export default User;","map":{"version":3,"sources":["D:/my-own-social-network/src/components/Users/User.jsx"],"names":["React","useEffect","useMemo","useRef","NavLink","cn","shortenUserName","User","memo","props","large","photos","id","name","followed","requestSubscribe","requestUnsubscribe","isSubscribing","myId","userAvatar","current","style","backgroundImage","userName","disableButton","find"],"mappings":"AAAA,MAAOA,CAAAA,KAAP,EAAeC,SAAf,CAA0BC,OAA1B,CAAmCC,MAAnC,KAAgD,OAAhD,CACA,OAAQC,OAAR,KAAsB,kBAAtB,CACA,MAAOC,CAAAA,EAAP,KAAe,YAAf,CACA,OAAQC,eAAR,KAA8B,YAA9B,CAGA,GAAMC,CAAAA,IAAI,CAAGP,KAAK,CAACQ,IAAN,CAAW,SAACC,KAAD,CAAW,IAGtBC,CAAAA,KAHsB,CAM7BD,KAN6B,CAG/BE,MAH+B,CAGtBD,KAHsB,CAGdE,EAHc,CAM7BH,KAN6B,CAGdG,EAHc,CAGVC,IAHU,CAM7BJ,KAN6B,CAGVI,IAHU,CAGJC,QAHI,CAM7BL,KAN6B,CAGJK,QAHI,CAI/BC,gBAJ+B,CAM7BN,KAN6B,CAI/BM,gBAJ+B,CAIbC,kBAJa,CAM7BP,KAN6B,CAIbO,kBAJa,CAK/BC,aAL+B,CAM7BR,KAN6B,CAK/BQ,aAL+B,CAKhBC,IALgB,CAM7BT,KAN6B,CAKhBS,IALgB,CAQjC,GAAIC,CAAAA,UAAU,CAAGhB,MAAM,CAAC,IAAD,CAAvB,CAEAF,SAAS,CAAC,UAAM,CACd,GAAI,CAACS,KAAL,CAAY,OACZS,UAAU,CAACC,OAAX,CAAmBC,KAAnB,CAAyBC,eAAzB,eAAkDZ,KAAlD,MACD,CAHQ,CAGN,EAHM,CAAT,CAKA,GAAIa,CAAAA,QAAQ,CAAGrB,OAAO,CAAC,iBAAMI,CAAAA,eAAe,CAACO,IAAD,CAArB,EAAD,CAA8B,CAACA,IAAD,CAA9B,CAAtB,CACA,GAAIW,CAAAA,aAAa,CAAGP,aAAa,CAACQ,IAAd,CAAmB,SAAAb,EAAE,QAAIA,CAAAA,EAAE,GAAKH,KAAK,CAACG,EAAjB,EAArB,GACjBA,EAAE,GAAKM,IADU,EACD,CAACA,IADpB,CAGA,MACE,4BAAK,SAAS,CAAC,kBAAf,EACE,oBAAC,OAAD,EAAS,EAAE,oBAAcN,EAAd,CAAX,EACE,2BAAK,SAAS,CAAC,yBAAf,CAAyC,GAAG,CAAEO,UAA9C,EADF,CADF,CAIE,2BAAK,SAAS,CAAC,uBAAf,EAAwCI,QAAxC,CAJF,CAME,6BACE,SAAS,CAAElB,EAAE,CAAES,QAAQ,CAAG,iCAAH,CAAuC,+BAAjD,CAAmFU,aAAa,EAAI,gBAApG,CADf,EAEGV,QAAQ,CAAG,aAAH,CAAmB,WAF9B,CAGE,8BAAQ,SAAS,CAAC,yBAAlB,CACQ,QAAQ,CAAEU,aADlB,CAEQ,OAAO,CAAEV,QAAQ,CAAG,iBAAME,CAAAA,kBAAkB,CAACP,KAAK,CAACG,EAAP,CAAxB,EAAH,CAAwC,iBAAMG,CAAAA,gBAAgB,CAACN,KAAK,CAACG,EAAP,CAAtB,EAFjE,EAHF,CANF,CADF,CAkBD,CArCY,CAAb,CAuCA,cAAeL,CAAAA,IAAf","sourcesContent":["import React, {useEffect, useMemo, useRef} from \"react\";\r\nimport {NavLink} from \"react-router-dom\";\r\nimport cn from \"classnames\";\r\nimport {shortenUserName} from \"./Users.js\";\r\n\r\n\r\nconst User = React.memo((props) => {\r\n\r\n  const {\r\n    photos: {large}, id, name, followed,\r\n    requestSubscribe, requestUnsubscribe,\r\n    isSubscribing, myId\r\n  } = props;\r\n\r\n  let userAvatar = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if (!large) return;\r\n    userAvatar.current.style.backgroundImage = `url(${large})`\r\n  }, []);\r\n\r\n  let userName = useMemo(() => shortenUserName(name), [name]);\r\n  let disableButton = isSubscribing.find(id => id === props.id) ||\r\n    (id === myId) || !myId;\r\n\r\n  return (\r\n    <div className=\"users-list__user\">\r\n      <NavLink to={`/profile/${id}`}>\r\n        <div className=\"users-list__user-avatar\" ref={userAvatar}/>\r\n      </NavLink>\r\n      <div className=\"users-list__user-name\">{userName}</div>\r\n\r\n      <label\r\n        className={cn((followed ? \"users-list__unsubscribe-wrapper\" : \"users-list__subscribe-wrapper\"), disableButton && \"is-subscribing\")}>\r\n        {followed ? \"Unsubscribe\" : \"Subscribe\"}\r\n        <button className=\"users-list__unsubscribe\"\r\n                disabled={disableButton}\r\n                onClick={followed ? () => requestUnsubscribe(props.id) : () => requestSubscribe(props.id)}\r\n        />\r\n      </label>\r\n\r\n    </div>\r\n  )\r\n});\r\n\r\nexport default User"]},"metadata":{},"sourceType":"module"}