{"ast":null,"code":"import _slicedToArray from\"D:\\\\my-own-social-network\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import transparentHeartImg from\"../../../assets/img/transparentHeart.gif\";import redHeartImg from\"../../../assets/img/redHeart.gif\";import getDate from\"../../../common/JS/getDate\";import React,{useEffect,useMemo,useRef,useState}from\"react\";import{CSSTransition}from\"react-transition-group\";import DeleteMessageBtn from\"../../../common/components/DeleteMessageBtn\";import linkParser from\"../../../common/JS/linkParser\";var Message=React.memo(function(props){var name=props.name,likes=props.likes,date=props.date,myLike=props.myLike,messageText=props.messageText,userAvatar=props.userAvatar,id=props.id,setMyLike=props.setMyLike,isLastMessage=props.isLastMessage;var messageAvatar=useRef(null);useEffect(function(){if(!userAvatar)return;messageAvatar.current.style.backgroundImage=\"url(\".concat(userAvatar,\")\");},[userAvatar,messageAvatar.current]);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),animation=_useState2[0],setAnimation=_useState2[1];useEffect(function(){setAnimation(props.animationState);},[props.animationState]);var text=useMemo(function(){return linkParser(messageText,{width:430,height:241.875});},[messageText]);return React.createElement(React.Fragment,null,React.createElement(CSSTransition,{classNames:\"profile-wall__message\",timeout:1000,in:animation,onEntered:function onEntered(){return props.stopAnimation(id);}},React.createElement(\"div\",{className:\"profile-wall__message\"},React.createElement(\"div\",{className:\"message\"},React.createElement(DeleteMessageBtn,{disabled:false,eventHandler:function eventHandler(){return props.deleteMessage(id);},className:\"message__delete-btn\"}),React.createElement(\"div\",{className:\"message__avatar\",ref:messageAvatar}),React.createElement(\"div\",{className:\"message__body\"},React.createElement(\"div\",{className:\"message__info\"},React.createElement(\"h1\",{className:\"message__from\"},name),React.createElement(\"time\",{className:\"message__time\"},getDate(date).getTime),React.createElement(\"span\",{className:\"message__date\"},getDate(date).getFullDate)),React.createElement(\"p\",{className:\"message__text\",dangerouslySetInnerHTML:{__html:text}}))),React.createElement(\"div\",{className:\"interaction-panel-wrapper\"},React.createElement(\"div\",{className:\"interaction-panel\"},React.createElement(\"label\",{className:\"interaction-panel__heart-wrapper\"},React.createElement(\"img\",{className:\"interaction-panel__heart-img\",alt:\"i like it\",src:myLike?redHeartImg:transparentHeartImg}),React.createElement(\"button\",{className:\"interaction-panel__heart\",onClick:props.ownerId?function(){props.likesControl(id);}:function(){}})),React.createElement(\"div\",{className:\"interaction-panel__likes\"},likes||\"\"))))));});export default Message;","map":{"version":3,"sources":["D:/my-own-social-network/src/components/Profile/ProfileWall/Message.jsx"],"names":["transparentHeartImg","redHeartImg","getDate","React","useEffect","useMemo","useRef","useState","CSSTransition","DeleteMessageBtn","linkParser","Message","memo","props","name","likes","date","myLike","messageText","userAvatar","id","setMyLike","isLastMessage","messageAvatar","current","style","backgroundImage","animation","setAnimation","animationState","text","width","height","stopAnimation","deleteMessage","getTime","getFullDate","__html","ownerId","likesControl"],"mappings":"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","sourcesContent":["import transparentHeartImg from \"../../../assets/img/transparentHeart.gif\";\r\nimport redHeartImg from \"../../../assets/img/redHeart.gif\";\r\nimport getDate from \"../../../common/JS/getDate\";\r\nimport React, {useEffect, useMemo, useRef, useState} from \"react\";\r\nimport {CSSTransition} from \"react-transition-group\";\r\nimport DeleteMessageBtn from \"../../../common/components/DeleteMessageBtn\";\r\nimport linkParser from \"../../../common/JS/linkParser\";\r\n\r\n\r\nconst Message = React.memo((props) => {\r\n\r\n  const {name, likes, date, myLike, messageText, userAvatar, id, setMyLike, isLastMessage} = props;\r\n  const messageAvatar = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if (!userAvatar) return;\r\n    messageAvatar.current.style.backgroundImage = `url(${userAvatar})`;\r\n  }, [userAvatar, messageAvatar.current]);\r\n\r\n  const [animation, setAnimation] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setAnimation(props.animationState);\r\n  }, [props.animationState]);\r\n\r\n\r\n  let text = useMemo(() => {\r\n    return linkParser(messageText, {width: 430, height: 241.875})\r\n  }, [messageText]);\r\n\r\n\r\n  return (\r\n    <>\r\n      <CSSTransition\r\n        classNames=\"profile-wall__message\"\r\n        timeout={1000}\r\n        in={animation}\r\n        onEntered={() => props.stopAnimation(id)}\r\n      >\r\n        <div className=\"profile-wall__message\">\r\n          <div className=\"message\">\r\n            <DeleteMessageBtn disabled={false}\r\n                              eventHandler={() => props.deleteMessage(id)}\r\n                              className=\"message__delete-btn\"\r\n            />\r\n            <div className=\"message__avatar\" ref={messageAvatar}>\r\n            </div>\r\n            <div className=\"message__body\">\r\n              <div className=\"message__info\">\r\n                <h1 className=\"message__from\">{name}</h1>\r\n                <time className=\"message__time\">{getDate(date).getTime}</time>\r\n                <span className=\"message__date\">{getDate(date).getFullDate}</span>\r\n              </div>\r\n              <p className=\"message__text\" dangerouslySetInnerHTML={{__html: text}}>\r\n              </p>\r\n            </div>\r\n          </div>\r\n          <div className=\"interaction-panel-wrapper\">\r\n            <div className=\"interaction-panel\">\r\n              <label\r\n                className=\"interaction-panel__heart-wrapper\">\r\n                <img className=\"interaction-panel__heart-img\" alt=\"i like it\"\r\n                     src={myLike ? redHeartImg : transparentHeartImg}/>\r\n                <button className=\"interaction-panel__heart\" onClick={props.ownerId ? () => {\r\n                  props.likesControl(id)\r\n                } : () => {\r\n                }}/>\r\n              </label>\r\n              <div className=\"interaction-panel__likes\">{likes || \"\"}</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </CSSTransition>\r\n    </>\r\n  )\r\n});\r\n\r\n\r\nexport default Message;"]},"metadata":{},"sourceType":"module"}